<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>三人行</title>
  <subtitle>三人行，必有我师焉</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.51os.xyz/"/>
  <updated>2017-03-26T16:03:29.871Z</updated>
  <id>http://www.51os.xyz/</id>
  
  <author>
    <name>liux</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>跨域资源共享 CORS</title>
    <link href="http://www.51os.xyz/2017/03/26/cors/"/>
    <id>http://www.51os.xyz/2017/03/26/cors/</id>
    <published>2017-03-26T08:48:22.000Z</published>
    <updated>2017-03-26T16:03:29.871Z</updated>
    
    <content type="html"><![CDATA[<p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨域服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同域使用的限制。</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。<br>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同域的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨域，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。<br>因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨域通信。实现非常简单，只需由服务器发送一个响应头即可。</p>
<h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">header(&quot;Access-Control-Allow-Origin: *&quot;);</div></pre></td></tr></table></figure>
<h2 id="apache"><a href="#apache" class="headerlink" title="apache"></a>apache</h2><p>1.修改httpd.conf，启用头信息自定义模块<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LoadModule headers_module modules/mod_headers.so</div></pre></td></tr></table></figure></p>
<p>2.修改虚拟主机配置，添加头信息到Directory内<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Header set Access-Control-Allow-Origin *</div></pre></td></tr></table></figure></p>
<h2 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">location /</div><div class="line">&#123;</div><div class="line">    add_header &apos;Access-Control-Allow-Origin&apos; &apos;*&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。&lt;br&gt;它允许浏览器向跨域服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同域使用的限制。&lt;/p&gt;
&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;
    
    </summary>
    
      <category term="服务器" scheme="http://www.51os.xyz/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="cors" scheme="http://www.51os.xyz/tags/cors/"/>
    
      <category term="apache" scheme="http://www.51os.xyz/tags/apache/"/>
    
      <category term="nginx" scheme="http://www.51os.xyz/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Centos LNMP一键安装包 安装多PHP版本</title>
    <link href="http://www.51os.xyz/2017/02/22/lnmp-phps/"/>
    <id>http://www.51os.xyz/2017/02/22/lnmp-phps/</id>
    <published>2017-02-22T14:36:33.000Z</published>
    <updated>2017-02-22T16:21:33.115Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>PHP进入7时代，部分项目未兼容PHP7，所以在原PHP5.4的版本上，新安装PHP7，实现php7和php5共存。</p>
<h2 id="系统环境"><a href="#系统环境" class="headerlink" title="系统环境"></a>系统环境</h2><p>Centos7.2<br>lnmp1.3(php5.4.45+mysql5.7.11)</p>
<h3 id="编译安装PHP7-0-7"><a href="#编译安装PHP7-0-7" class="headerlink" title="编译安装PHP7.0.7"></a>编译安装PHP7.0.7</h3><p>取lnmp1.3安装包中的PHP7包<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar zxf php-7.0.7.tar.gz</div><div class="line"><span class="built_in">cd</span> php-7.0.7</div><div class="line">./configure --prefix=/usr/<span class="built_in">local</span>/php7 --with-config-file-path=/usr/<span class="built_in">local</span>/php7/etc --enable-fpm --with-fpm-user=www --with-fpm-group=www --enable-mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-iconv-dir --with-freetype-dir=/usr/<span class="built_in">local</span>/freetype --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curl --enable-mbregex --enable-mbstring --enable-intl --enable-pcntl --with-mcrypt --enable-ftp --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-xmlrpc --enable-zip --enable-soap --with-gettext --disable-fileinfo --enable-opcache --with-xsl</div><div class="line">make ZEND_EXTRA_LIBS=<span class="string">'-liconv'</span></div><div class="line">make install</div></pre></td></tr></table></figure></p>
<h3 id="配置PHP7-0-7"><a href="#配置PHP7-0-7" class="headerlink" title="配置PHP7.0.7"></a>配置PHP7.0.7</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">mkdir -p /usr/<span class="built_in">local</span>/php7/etc</div><div class="line">\cp php.ini-production /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/post_max_size =.*/post_max_size = 50M/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/upload_max_filesize =.*/upload_max_filesize = 50M/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/;date.timezone =.*/date.timezone = PRC/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/short_open_tag =.*/short_open_tag = On/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/;cgi.fix_pathinfo=.*/cgi.fix_pathinfo=0/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/max_execution_time =.*/max_execution_time = 300/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">sed -i <span class="string">'s/disable_functions =.*/disable_functions = passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server/g'</span> /usr/<span class="built_in">local</span>/php7/etc/php.ini</div><div class="line">cat &gt;&gt;/usr/<span class="built_in">local</span>/php7/etc/php.ini&lt;&lt;EOF</div><div class="line"></div><div class="line">;eaccelerator</div><div class="line"></div><div class="line">;ionCube</div><div class="line"></div><div class="line">;opcache</div><div class="line"></div><div class="line">[Zend ZendGuard Loader]</div><div class="line">;php7 <span class="keyword">do</span> not support zendguardloader @Sep.2015,after support you can uncomment the following line.</div><div class="line">;zend_extension=/usr/<span class="built_in">local</span>/zend/ZendGuardLoader.so</div><div class="line">;zend_loader.enable=1</div><div class="line">;zend_loader.disable_licensing=0</div><div class="line">;zend_loader.obfuscation_level_support=3</div><div class="line">;zend_loader.license_path=</div><div class="line"></div><div class="line">;xcache</div><div class="line"></div><div class="line">EOF</div><div class="line">cat &gt;/usr/<span class="built_in">local</span>/php7/etc/php-fpm.conf&lt;&lt;EOF</div><div class="line">[global]</div><div class="line">pid = /usr/<span class="built_in">local</span>/php7/var/run/php-fpm.pid</div><div class="line">error_log = /usr/<span class="built_in">local</span>/php7/var/<span class="built_in">log</span>/php-fpm.log</div><div class="line">log_level = notice</div><div class="line"></div><div class="line">[www]</div><div class="line">listen = /tmp/php7-cgi.sock</div><div class="line">listen.backlog = -1</div><div class="line">listen.allowed_clients = 127.0.0.1</div><div class="line">listen.owner = www</div><div class="line">listen.group = www</div><div class="line">listen.mode = 0666</div><div class="line">user = www</div><div class="line">group = www</div><div class="line">pm = dynamic</div><div class="line">pm.max_children = 10</div><div class="line">pm.start_servers = 2</div><div class="line">pm.min_spare_servers = 1</div><div class="line">pm.max_spare_servers = 6</div><div class="line">request_terminate_timeout = 100</div><div class="line">request_slowlog_timeout = 0</div><div class="line">slowlog = var/<span class="built_in">log</span>/slow7.log</div><div class="line">EOF</div></pre></td></tr></table></figure>
<h3 id="php7-fpm设为系统服务"><a href="#php7-fpm设为系统服务" class="headerlink" title="php7-fpm设为系统服务"></a>php7-fpm设为系统服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">\cp sapi/fpm/init.d.php-fpm /etc/init.d/php7-fpm</div><div class="line">chmod +x /etc/init.d/php7-fpm</div><div class="line">/etc/init.d/php7-fpm start</div><div class="line">chkconfig --add php7-fpm</div></pre></td></tr></table></figure>
<h3 id="创建enable-php7-conf脚本"><a href="#创建enable-php7-conf脚本" class="headerlink" title="创建enable-php7.conf脚本"></a>创建enable-php7.conf脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp /usr/<span class="built_in">local</span>/nginx/conf/<span class="built_in">enable</span>-php.conf /usr/<span class="built_in">local</span>/nginx/conf/<span class="built_in">enable</span>-php7.conf</div><div class="line">vi /usr/<span class="built_in">local</span>/nginx/conf/<span class="built_in">enable</span>-php7.conf</div></pre></td></tr></table></figure>
<p>改<br>fastcgi_pass  unix:/tmp/php-cgi.sock;<br>为<br>fastcgi_pass  unix:/tmp/php7-cgi.sock;</p>
<h3 id="修改vhost的conf文件使用PHP7"><a href="#修改vhost的conf文件使用PHP7" class="headerlink" title="修改vhost的conf文件使用PHP7"></a>修改vhost的conf文件使用PHP7</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /usr/<span class="built_in">local</span>/nginx/conf/vhost/xxxxxx.conf</div></pre></td></tr></table></figure>
<p>改<br>include enable-php.conf;<br>为<br>include enable-php7.conf;</p>
<h3 id="修改lnmp脚本-usr-bin-lnmp"><a href="#修改lnmp脚本-usr-bin-lnmp" class="headerlink" title="修改lnmp脚本(/usr/bin/lnmp)"></a>修改lnmp脚本(/usr/bin/lnmp)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">PHPFPMPIDFILE=/usr/<span class="built_in">local</span>/php/var/run/php-fpm.pid</div><div class="line">PHP7FPMPIDFILE=/usr/<span class="built_in">local</span>/php7/var/run/php-fpm.pid</div><div class="line"></div><div class="line">/etc/init.d/php-fpm start</div><div class="line">/etc/init.d/php7-fpm start</div><div class="line"></div><div class="line"><span class="function"><span class="title">lnmp_status</span></span>()</div><div class="line">&#123;</div><div class="line">    /etc/init.d/nginx status</div><div class="line">    <span class="keyword">if</span> [ <span class="_">-f</span> <span class="variable">$PHPFPMPIDFILE</span> ]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"php-fpm is runing!"</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"php-fpm is stop!"</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line">    <span class="keyword">if</span> [ <span class="_">-f</span> <span class="variable">$PHP7FPMPIDFILE</span> ]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"php7-fpm is runing!"</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="string">"php7-fpm is stop!"</span></div><div class="line">    <span class="keyword">fi</span></div><div class="line">    /etc/init.d/mysql status</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;PHP进入7时代，部分项目未兼容PHP7，所以在原PHP5.4的版本上，新安装PHP7，实现php7和php5共存。&lt;/p&gt;
&lt;h2 id=
    
    </summary>
    
      <category term="linux" scheme="http://www.51os.xyz/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.51os.xyz/tags/linux/"/>
    
      <category term="php" scheme="http://www.51os.xyz/tags/php/"/>
    
      <category term="lnmp" scheme="http://www.51os.xyz/tags/lnmp/"/>
    
  </entry>
  
  <entry>
    <title>hexo部署博客到github及云服务器</title>
    <link href="http://www.51os.xyz/2017/02/04/hexo-full/"/>
    <id>http://www.51os.xyz/2017/02/04/hexo-full/</id>
    <published>2017-02-04T07:40:16.000Z</published>
    <updated>2017-02-22T16:22:57.233Z</updated>
    
    <content type="html"><![CDATA[<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="本地端-windows工作平台"><a href="#本地端-windows工作平台" class="headerlink" title="本地端(windows工作平台)"></a>本地端(windows工作平台)</h3><ul>
<li>git</li>
<li>node.js<h3 id="云端-Centos阿里云"><a href="#云端-Centos阿里云" class="headerlink" title="云端(Centos阿里云)"></a>云端(Centos阿里云)</h3></li>
<li>gogs</li>
<li>nginx</li>
</ul>
<h2 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo-cli -g</div></pre></td></tr></table></figure>
<h2 id="hexo初始化及配置"><a href="#hexo初始化及配置" class="headerlink" title="hexo初始化及配置"></a>hexo初始化及配置</h2><h3 id="初始化项目文件夹blog"><a href="#初始化项目文件夹blog" class="headerlink" title="初始化项目文件夹blog"></a>初始化项目文件夹blog</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo init blog</div><div class="line"><span class="built_in">cd</span> blog</div><div class="line">npm install</div></pre></td></tr></table></figure>
<h3 id="安装相应插件"><a href="#安装相应插件" class="headerlink" title="安装相应插件"></a>安装相应插件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div><div class="line">npm install hexo-generator-feed --save</div><div class="line">npm install hexo-generator-search --save</div><div class="line">npm install hexo-generator-sitemap --save</div></pre></td></tr></table></figure>
<h3 id="新建标签云、关于我、404页面"><a href="#新建标签云、关于我、404页面" class="headerlink" title="新建标签云、关于我、404页面"></a>新建标签云、关于我、404页面</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo new page tags</div><div class="line">hexo new page about</div><div class="line">hexo new page 404</div></pre></td></tr></table></figure>
<h3 id="下载相应主题保存到-themes-文件夹中"><a href="#下载相应主题保存到-themes-文件夹中" class="headerlink" title="下载相应主题保存到/themes/文件夹中"></a>下载相应主题保存到/themes/文件夹中</h3><h3 id="修改站点和主题配置文件-config-yml"><a href="#修改站点和主题配置文件-config-yml" class="headerlink" title="修改站点和主题配置文件_config.yml"></a>修改站点和主题配置文件_config.yml</h3><h3 id="本地开启服务，查看博客-默认端口4000"><a href="#本地开启服务，查看博客-默认端口4000" class="headerlink" title="本地开启服务，查看博客(默认端口4000)"></a>本地开启服务，查看博客(默认端口4000)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo s</div></pre></td></tr></table></figure>
<h2 id="本地配置SSH-keys"><a href="#本地配置SSH-keys" class="headerlink" title="本地配置SSH keys"></a>本地配置SSH keys</h2><h3 id="检查是否已经存在SSH-keys"><a href="#检查是否已经存在SSH-keys" class="headerlink" title="检查是否已经存在SSH keys"></a>检查是否已经存在SSH keys</h3><p>在Git Bash输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ls -al ~/.ssh</div></pre></td></tr></table></figure></p>
<h3 id="创建SSH-keys-已存在略过"><a href="#创建SSH-keys-已存在略过" class="headerlink" title="创建SSH keys(已存在略过)"></a>创建SSH keys(已存在略过)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa -C <span class="string">"your_email@example.com"</span></div></pre></td></tr></table></figure>
<h3 id="复制公钥内容"><a href="#复制公钥内容" class="headerlink" title="复制公钥内容"></a>复制公钥内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clip &lt; ~/.ssh/id_rsa.pub</div></pre></td></tr></table></figure>
<h2 id="github上部署"><a href="#github上部署" class="headerlink" title="github上部署"></a>github上部署</h2><h3 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h3><p>登录github，创建 用户名.github.io 的Public项目。</p>
<h3 id="配置SSH密钥"><a href="#配置SSH密钥" class="headerlink" title="配置SSH密钥"></a>配置SSH密钥</h3><p>把本地的公钥内容粘贴到Key框内</p>
<h3 id="测试SSH密钥登录"><a href="#测试SSH密钥登录" class="headerlink" title="测试SSH密钥登录"></a>测试SSH密钥登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -T git@github.com</div></pre></td></tr></table></figure>
<p>如果通过，返回<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hi xxx! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></div></pre></td></tr></table></figure></p>
<h2 id="云服务器上部署"><a href="#云服务器上部署" class="headerlink" title="云服务器上部署"></a>云服务器上部署</h2><h3 id="创建项目-1"><a href="#创建项目-1" class="headerlink" title="创建项目"></a>创建项目</h3><p>登录gogs，创建项目。</p>
<h3 id="设置项目的Git钩子"><a href="#设置项目的Git钩子" class="headerlink" title="设置项目的Git钩子"></a>设置项目的Git钩子</h3><p>设置Git钩子post-receive为(/home/wwwroot/blog为博客根目录)<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">git --work-tree=/home/wwwroot/blog checkout <span class="_">-f</span></div></pre></td></tr></table></figure></p>
<h3 id="设置git用户对博客根目录权限"><a href="#设置git用户对博客根目录权限" class="headerlink" title="设置git用户对博客根目录权限"></a>设置git用户对博客根目录权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chown -R git:git /home/wwwroot/blog</div></pre></td></tr></table></figure>
<h3 id="配置SSH密钥-1"><a href="#配置SSH密钥-1" class="headerlink" title="配置SSH密钥"></a>配置SSH密钥</h3><p>把本地的公钥内容粘贴到密钥内容框内</p>
<h3 id="测试SSH密钥登录-1"><a href="#测试SSH密钥登录-1" class="headerlink" title="测试SSH密钥登录"></a>测试SSH密钥登录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh -T git@git.xxxx.com</div></pre></td></tr></table></figure>
<p>如果通过，返回<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hi there, You<span class="string">'ve successfully authenticated, but Gogs does not provide shell access.</span></div></pre></td></tr></table></figure></p>
<h2 id="本地部署"><a href="#本地部署" class="headerlink" title="本地部署"></a>本地部署</h2><h3 id="修改站点配置文件-config-yml"><a href="#修改站点配置文件-config-yml" class="headerlink" title="修改站点配置文件_config.yml"></a>修改站点配置文件_config.yml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repo:</div><div class="line">    github: git@github.com:xxx/xxx.github.io.git</div><div class="line">    gogs: git@git.xxxx.com:xxx/blog.git</div></pre></td></tr></table></figure>
<h3 id="执行生成及部署命令"><a href="#执行生成及部署命令" class="headerlink" title="执行生成及部署命令"></a>执行生成及部署命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo d -g</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;工具&quot;&gt;&lt;a href=&quot;#工具&quot; class=&quot;headerlink&quot; title=&quot;工具&quot;&gt;&lt;/a&gt;工具&lt;/h2&gt;&lt;h3 id=&quot;本地端-windows工作平台&quot;&gt;&lt;a href=&quot;#本地端-windows工作平台&quot; class=&quot;headerlink&quot; ti
    
    </summary>
    
      <category term="服务器" scheme="http://www.51os.xyz/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="blog" scheme="http://www.51os.xyz/tags/blog/"/>
    
      <category term="hexo" scheme="http://www.51os.xyz/tags/hexo/"/>
    
      <category term="开源" scheme="http://www.51os.xyz/tags/%E5%BC%80%E6%BA%90/"/>
    
      <category term="阿里云" scheme="http://www.51os.xyz/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
      <category term="gogs" scheme="http://www.51os.xyz/tags/gogs/"/>
    
  </entry>
  
  <entry>
    <title>开源网盘云存储 Seafile</title>
    <link href="http://www.51os.xyz/2017/02/04/seafile/"/>
    <id>http://www.51os.xyz/2017/02/04/seafile/</id>
    <published>2017-02-04T04:07:10.000Z</published>
    <updated>2017-02-04T14:56:58.987Z</updated>
    
    <content type="html"><![CDATA[<p>Seafile 是一款安全、高性能的开源网盘（云存储）软件。Seafile 提供了主流网盘（云盘）产品所具有的功能，包括文件同步、文件共享等。在此基础上，Seafile 还提供了高级的安全保护功能以及群组协作功能。由于 Seafile 是开源的，你可以把它部署在私有云的环境中，作为私有的企业网盘。Seafile 支持 Mac、Linux、Windows 三个桌面平台，支持 Android 和 iOS 两个移动平台。</p>
<p>Seafile 是由国内团队开发的国际型项目，目前已有50万左右的用户，以欧洲用户为多。自发布以来，Seafile 一直保持开放、国际化、高质量的宗旨，受到国内外大型机构的信赖。目前主要的大型客户包括卡巴斯基、中国平安，以及欧美多家知名大学和科研机构。</p>
<p>你可以把 Seafile 想象成是面向团队的开源Dropbox。</p>
<p><img src="/images/seafile.png" alt=""></p>
<p>Github：<a href="https://github.com/haiwen/seafile" target="_blank" rel="external">https://github.com/haiwen/seafile</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Seafile 是一款安全、高性能的开源网盘（云存储）软件。Seafile 提供了主流网盘（云盘）产品所具有的功能，包括文件同步、文件共享等。在此基础上，Seafile 还提供了高级的安全保护功能以及群组协作功能。由于 Seafile 是开源的，你可以把它部署在私有云的环境
    
    </summary>
    
      <category term="开源项目" scheme="http://www.51os.xyz/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/"/>
    
    
      <category term="开源" scheme="http://www.51os.xyz/tags/%E5%BC%80%E6%BA%90/"/>
    
      <category term="seafile" scheme="http://www.51os.xyz/tags/seafile/"/>
    
  </entry>
  
  <entry>
    <title>SSH远程会话管理 - screen</title>
    <link href="http://www.51os.xyz/2017/02/04/screen/"/>
    <id>http://www.51os.xyz/2017/02/04/screen/</id>
    <published>2017-02-04T02:49:33.000Z</published>
    <updated>2017-02-22T16:23:12.786Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>SSH远程登录到Linux服务器，经常运行一些需要很长时间才能完成的任务。如果网络突然断开，或者其他情况导致不得不与远程SSH服务器链接断开，远程执行的命令会被杀掉，一切半途而废了。<br>只要Screen本身没有终止，在其内部运行的会话都可以恢复。这一点对于远程登录的用户特别有用——即使网络连接中断，用户也不会失去对已经打开的命令行会话的控制。只要再次登录到主机上执行screen -r就可以恢复会话的运行。同样在暂时离开的时候，也可以执行分离命令detach，在保证里面的程序正常运行的情况下让Screen挂起（切换到后台）。</p>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h3 id="安装screen"><a href="#安装screen" class="headerlink" title="安装screen"></a>安装screen</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install screen</div></pre></td></tr></table></figure>
<h3 id="创建会话"><a href="#创建会话" class="headerlink" title="创建会话"></a>创建会话</h3><p>创建名为test的会话<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -S <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<h3 id="暂时离开，保留会话"><a href="#暂时离开，保留会话" class="headerlink" title="暂时离开，保留会话"></a>暂时离开，保留会话</h3><p>当需要临时离开时（会话中的程序不会关闭，仍在运行）可以用快捷键Ctrl+a d(即按住Ctrl，依次再按a,d)</p>
<h3 id="查看会话列表"><a href="#查看会话列表" class="headerlink" title="查看会话列表"></a>查看会话列表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -ls</div></pre></td></tr></table></figure>
<h3 id="恢复会话"><a href="#恢复会话" class="headerlink" title="恢复会话"></a>恢复会话</h3><p>恢复到名为test的会话<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -r <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
<h3 id="关闭会话"><a href="#关闭会话" class="headerlink" title="关闭会话"></a>关闭会话</h3><p>在当前会话中执行exit退出</p>
<h3 id="远程演示"><a href="#远程演示" class="headerlink" title="远程演示"></a>远程演示</h3><p>观众屏幕上就会出现和演示者同步<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">screen -x <span class="built_in">test</span></div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot; title=&quot;背景&quot;&gt;&lt;/a&gt;背景&lt;/h2&gt;&lt;p&gt;SSH远程登录到Linux服务器，经常运行一些需要很长时间才能完成的任务。如果网络突然断开，或者其他情况导致不得不与远程SSH服务器链接断开
    
    </summary>
    
      <category term="linux" scheme="http://www.51os.xyz/categories/linux/"/>
    
    
      <category term="linux" scheme="http://www.51os.xyz/tags/linux/"/>
    
      <category term="screen" scheme="http://www.51os.xyz/tags/screen/"/>
    
  </entry>
  
</feed>
